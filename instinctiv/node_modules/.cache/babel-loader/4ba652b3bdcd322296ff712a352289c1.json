{"ast":null,"code":"import _classCallCheck from \"/Users/yash/instinctiv/instinctiv/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/yash/instinctiv/instinctiv/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/yash/instinctiv/instinctiv/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/yash/instinctiv/instinctiv/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/yash/instinctiv/instinctiv/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/yash/instinctiv/instinctiv/src/components/UserData/index.js\";\nimport React, { Component } from 'react';\nimport { withAuthorization, AuthUserContext } from '../Session';\nimport * as ROLES from '../../constants/roles';\nimport { Table, Col, Row, Button, Card } from 'reactstrap';\nimport { withFirebase } from '../Firebase';\nimport { compose } from 'recompose';\nimport BootstrapTable from 'react-bootstrap-table-next';\nimport paginationFactory from 'react-bootstrap-table2-paginator';\n\nvar UserData =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(UserData, _Component);\n\n  function UserData(props) {\n    var _this;\n\n    _classCallCheck(this, UserData);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UserData).call(this, props));\n\n    _this.toggleDarkLight = function (event) {\n      var body = document.getElementById(\"body\");\n      var currentClass = body.className;\n      body.className = currentClass === \"dark-mode\" ? \"light-mode\" : \"dark-mode\";\n    };\n\n    _this.state = {\n      betsCol: [{\n        dataField: 'stockId',\n        text: 'Stock ID',\n        sort: true\n      }, {\n        dataField: 'bet',\n        text: 'Tokens Bet',\n        sort: true\n      }, {\n        dataField: 'username',\n        text: 'User',\n        sort: true\n      }, {\n        dataField: 'direction',\n        text: 'Direction'\n      }],\n      bets: []\n    };\n    return _this;\n  }\n\n  _createClass(UserData, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.props.firebase.db.collection(\"Users\").doc(this.props.firebase.auth.O).onSnapshot(function (docSnapshot) {\n        console.log(\"Received doc snapshot: docSnapshot\", docSnapshot.data());\n\n        _this2.setState({\n          balance: docSnapshot.data().balance,\n          username: docSnapshot.data().username\n        }); // ...\n\n      }, function (err) {\n        console.log(\"Encountered error: \".concat(err));\n      });\n      var db = this.props.firebase.db;\n      this.users = db.collection(\"Users\").orderBy('username', 'asc').limit(20).onSnapshot(function (querySnapshot) {\n        document.getElementById(\"users\").innerHTML = \"\";\n        querySnapshot.forEach(function (element) {\n          _this2.renderUserBoard(element, element.id);\n        });\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.users();\n    }\n  }, {\n    key: \"renderUserBoard\",\n    value: function renderUserBoard(leader, id) {\n      var _this3 = this;\n\n      var row = document.createElement('tr');\n      row.setAttribute('user', leader.data().username);\n      var name = document.createElement('td');\n      name.textContent = leader.data().username;\n      var mail = document.createElement('td');\n      mail.textContent = leader.data().email;\n      var add = document.createElement('Input');\n      add.setAttribute(\"type\", \"checkbox\"); //add.setAttribute(\"id\",leader.data().username+\"check\");\n\n      if (leader.data().roles && leader.data().roles.ADMIN == 'ADMIN') {\n        add.setAttribute('checked', true);\n      } //console.log(leader.data().roles.ADMIN);\n\n\n      add.addEventListener('click', function (e) {\n        e.stopPropagation();\n        console.log(add.checked);\n        var adminStr = add.checked ? 'ADMIN' : '';\n\n        _this3.props.firebase.db.collection(\"Users\").doc(id).update({\n          \"roles.ADMIN\": adminStr\n        });\n      });\n      row.appendChild(name);\n      row.appendChild(mail);\n      row.appendChild(add);\n      document.getElementById(\"users\").appendChild(row);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return React.createElement(AuthUserContext.Consumer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, function (authUser) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        }, React.createElement(\"body\", {\n          id: \"body\",\n          class: \"light-mode\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102\n          },\n          __self: this\n        }, React.createElement(Button, {\n          color: \"primary\",\n          name: \"dark_light\",\n          onClick: _this4.toggleDarkLight,\n          title: \"Toggle dark/light mode\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }, \"Change Theme\"), React.createElement(Row, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104\n          },\n          __self: this\n        }, React.createElement(Col, {\n          sm: \"3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"back\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        })), React.createElement(Col, {\n          sm: \"6\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"home-page\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }, \"User Database\")), React.createElement(Card, {\n          body: true,\n          outline: true,\n          color: \"primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }, React.createElement(Table, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, React.createElement(\"thead\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        }, React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }, \"Username\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        }, \"Email\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119\n          },\n          __self: this\n        }, \"Admin\"))), React.createElement(\"tbody\", {\n          id: \"users\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122\n          },\n          __self: this\n        })))))));\n      });\n    }\n  }]);\n\n  return UserData;\n}(Component);\n\nvar condition = function condition(authUser) {\n  return authUser && !!authUser.roles[ROLES.ADMIN];\n};\n\nexport default compose(withAuthorization(condition), withFirebase)(UserData);","map":{"version":3,"sources":["/Users/yash/instinctiv/instinctiv/src/components/UserData/index.js"],"names":["React","Component","withAuthorization","AuthUserContext","ROLES","Table","Col","Row","Button","Card","withFirebase","compose","BootstrapTable","paginationFactory","UserData","props","toggleDarkLight","event","body","document","getElementById","currentClass","className","state","betsCol","dataField","text","sort","bets","firebase","db","collection","doc","auth","O","onSnapshot","docSnapshot","console","log","data","setState","balance","username","err","users","orderBy","limit","querySnapshot","innerHTML","forEach","element","renderUserBoard","id","leader","row","createElement","setAttribute","name","textContent","mail","email","add","roles","ADMIN","addEventListener","e","stopPropagation","checked","adminStr","update","appendChild","authUser","condition"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\n\nimport { withAuthorization, AuthUserContext } from '../Session';\nimport * as ROLES from '../../constants/roles';\nimport { Table, Col, Row, Button, Card } from 'reactstrap';\nimport { withFirebase } from '../Firebase';\n\nimport { compose } from 'recompose';\n\nimport BootstrapTable from 'react-bootstrap-table-next';\nimport paginationFactory from 'react-bootstrap-table2-paginator';\n\nclass UserData extends Component {\n\n  constructor(props){\n    super(props);\n    this.state = {\n      betsCol: [{\n        dataField: 'stockId',\n        text: 'Stock ID',\n        sort: true\n      }, {\n        dataField: 'bet',\n        text: 'Tokens Bet',\n        sort: true\n      }, {\n        dataField: 'username',\n        text: 'User',\n        sort: true\n      }, {\n        dataField: 'direction',\n        text: 'Direction'\n      }],\n      bets: [],\n    };\n  }\n  toggleDarkLight = event => {\n   var body = document.getElementById(\"body\");\n   var currentClass = body.className;\n   body.className = currentClass === \"dark-mode\" ? \"light-mode\" : \"dark-mode\";\n }\n\n  componentDidMount() {\n    this.props.firebase.db.collection(\"Users\").doc(this.props.firebase.auth.O).onSnapshot(docSnapshot => {\n      console.log(`Received doc snapshot: docSnapshot`, docSnapshot.data());\n      this.setState({\n        balance: docSnapshot.data().balance,\n        username: docSnapshot.data().username\n      });      // ...\n    }, err => {\n      console.log(`Encountered error: ${err}`);\n    });\n    var db = this.props.firebase.db;\n    this.users = db.collection(\"Users\").orderBy('username', 'asc').limit(20).onSnapshot(querySnapshot=> {\n      document.getElementById(\"users\").innerHTML = \"\";\n      querySnapshot.forEach(element => {\n        this.renderUserBoard(element, element.id);\n      });\n    })\n  }\n\n  componentWillUnmount() {\n    this.users();\n  }\n\n  renderUserBoard(leader, id){\n    var row = document.createElement('tr');\n    row.setAttribute('user',leader.data().username);\n    var name = document.createElement('td');\n    name.textContent = leader.data().username;\n    var mail = document.createElement('td');\n    mail.textContent = leader.data().email;\n    var add = document.createElement('Input');\n    add.setAttribute(\"type\",\"checkbox\");\n    //add.setAttribute(\"id\",leader.data().username+\"check\");\n    if(leader.data().roles && leader.data().roles.ADMIN=='ADMIN'){\n      add.setAttribute('checked',true);\n    }\n    //console.log(leader.data().roles.ADMIN);\n    add.addEventListener('click',(e)=>{\n      e.stopPropagation();\n      console.log(add.checked);\n      var adminStr = add.checked?'ADMIN':'';\n      this.props.firebase.db.collection(\"Users\").doc(id).update({\n        \"roles.ADMIN\": adminStr,\n      })\n    });\n\n\n    row.appendChild(name);\n    row.appendChild(mail);\n    row.appendChild(add)\n    document.getElementById(\"users\").appendChild(row);\n\n  }\n\n  render() {\n    return (\n      <AuthUserContext.Consumer>\n      {authUser => (\n        <div>\n        <body id=\"body\" class=\"light-mode\">\n        <Button color=\"primary\" name=\"dark_light\" onClick= {this.toggleDarkLight} title=\"Toggle dark/light mode\">Change Theme</Button>\n          <Row>\n            <Col sm=\"3\">\n            <div className=\"back\">\n            </div>\n            </Col>\n            <Col sm=\"6\">\n              <div className=\"home-page\">\n            <h2>User Database</h2>\n            </div>\n             <Card body outline color=\"primary\">\n              <Table>\n                <thead>\n                  <tr>\n                    <th>Username</th>\n                    <th>Email</th>\n                    <th>Admin</th>\n                  </tr>\n                </thead>\n              <tbody id=\"users\">\n\n              </tbody>\n              </Table>\n            </Card>\n            </Col>\n            </Row>\n            </body>\n        </div>\n      )}\n      </AuthUserContext.Consumer>\n    );\n  }\n}\n\nconst condition = authUser =>\n  authUser && !!authUser.roles[ROLES.ADMIN];\n\nexport default compose(\n  withAuthorization(condition),\n  withFirebase,\n)(UserData);\n"]},"metadata":{},"sourceType":"module"}